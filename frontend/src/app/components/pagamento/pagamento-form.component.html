<div class="modal-overlay" (click)="fechar.emit()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <h3>Registrar Pagamento</h3>
    <form [formGroup]="form" (ngSubmit)="salvar()">
      <div class="form-grid">
        <div class="form-group">
          <label>Nº do Pedido *</label>
          <input type="number" formControlName="idPedido" placeholder="Ex: 1" min="1" [class.invalid]="err('idPedido')" />
          @if (err('idPedido')) { <span class="field-error">ID do pedido é obrigatório</span> }
        </div>
        <div class="form-group">
          <label>Valor Pago (R$) *</label>
          <input type="number" formControlName="valorPago" placeholder="0,00" min="0.01" step="0.01" [class.invalid]="err('valorPago')" />
          @if (err('valorPago')) { <span class="field-error">Valor é obrigatório</span> }
        </div>
        <div class="form-group form-group--full">
          <label>Método de Pagamento *</label>
          <select formControlName="metodoPagamento" [class.invalid]="err('metodoPagamento')">
            <option value="">Selecione...</option>
            @for (m of metodos; track m) {
              <option [value]="m">{{ m }}</option>
            }
          </select>
          @if (err('metodoPagamento')) { <span class="field-error">Método é obrigatório</span> }
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn--secondary" (click)="fechar.emit()">Cancelar</button>
        <button type="submit" class="btn btn--primary" [disabled]="salvando">{{ salvando ? 'Salvando...' : 'Registrar' }}</button>
      </div>
    </form>
  </div>
</div>
