<div class="page-header">
  <h2>Card√°pio</h2>
  <button class="btn btn--primary" (click)="novoItem()">+ Novo Item</button>
</div>

<div class="card">
  <div class="search-bar">
    <select [(ngModel)]="categoria" (change)="filtrar()">
      <option value="">Todas as categorias</option>
      <option value="Bebida">Bebida</option>
      <option value="Lanche">Lanche</option>
      <option value="Sobremesa">Sobremesa</option>
    </select>
  </div>

  <div class="table-wrapper">
    @if (loading()) {
      <p style="text-align:center;padding:2rem;color:#6b7280">Carregando...</p>
    } @else if (itens().length === 0) {
      <div class="empty-state">
        <div class="empty-state__icon">üçî</div>
        <p>Nenhum item no card√°pio</p>
      </div>
    } @else {
      <table>
        <thead>
          <tr><th>ID</th><th>Nome</th><th>Categoria</th><th>Pre√ßo</th><th>Descri√ß√£o</th><th>A√ß√µes</th></tr>
        </thead>
        <tbody>
          @for (item of itens(); track item.idCardapio) {
            <tr>
              <td>{{ item.idCardapio }}</td>
              <td>{{ item.nome }}</td>
              <td><span class="badge {{ badgeCategoria(item.categoria) }}">{{ item.categoria }}</span></td>
              <td>{{ formatarPreco(item.preco) }}</td>
              <td>{{ item.descricao || '‚Äî' }}</td>
              <td>
                <div class="actions">
                  <button class="btn btn--warning btn--sm" (click)="editar(item.idCardapio)">Editar</button>
                  <button class="btn btn--danger btn--sm" (click)="excluir(item.idCardapio, item.nome)">Excluir</button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
      <div class="pagination">
        <button class="btn btn--secondary btn--sm" [disabled]="page === 0" (click)="anterior()">‚Üê Anterior</button>
        <span>P√°gina {{ page + 1 }} de {{ totalPages }}</span>
        <button class="btn btn--secondary btn--sm" [disabled]="page >= totalPages - 1" (click)="proximo()">Pr√≥xima ‚Üí</button>
      </div>
    }
  </div>
</div>

@if (showForm()) {
  <app-cardapio-form [id]="editingId()" (fechar)="fecharForm()" />
}
