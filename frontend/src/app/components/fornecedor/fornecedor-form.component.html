<div class="modal-overlay" (click)="fechar.emit()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <h3>{{ titulo }}</h3>
    <form [formGroup]="form" (ngSubmit)="salvar()">
      <div class="form-grid">
        <div class="form-group">
          <label>CNPJ *</label>
          <input type="text" formControlName="cnpj" placeholder="00.000.000/0000-00"
                 [class.invalid]="err('cnpj')" maxlength="18" (input)="mascaraCnpj($event)" />
          @if (err('cnpj')) {
            <span class="field-error">
              @if (form.get('cnpj')?.hasError('required')) { CNPJ é obrigatório }
              @else { CNPJ deve ter 14 dígitos }
            </span>
          }
        </div>
        <div class="form-group">
          <label>Nome da Empresa *</label>
          <input type="text" formControlName="nomeEmpresa" placeholder="Razão Social" [class.invalid]="err('nomeEmpresa')" maxlength="100" />
          @if (err('nomeEmpresa')) { <span class="field-error">Nome é obrigatório</span> }
        </div>
        <div class="form-group">
          <label>Telefone *</label>
          <input type="text" formControlName="telefone" placeholder="(00) 00000-0000"
                 [class.invalid]="err('telefone')" maxlength="15" (input)="mascaraTelefone($event)" />
          @if (err('telefone')) { <span class="field-error">Telefone é obrigatório</span> }
        </div>
        <div class="form-group">
          <label>Data de Cadastro *</label>
          <input type="date" formControlName="dataCadastro" [class.invalid]="err('dataCadastro')" />
          @if (err('dataCadastro')) { <span class="field-error">Data é obrigatória</span> }
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn--secondary" (click)="fechar.emit()">Cancelar</button>
        <button type="submit" class="btn btn--primary" [disabled]="salvando">{{ salvando ? 'Salvando...' : 'Salvar' }}</button>
      </div>
    </form>
  </div>
</div>
